<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>BattleCity game reconstruction</title>
        <meta http-equiv="Content-Type" content="text/html;"/>
        <meta charset="utf-8"/>
        <!--<link rel='stylesheet' type='text/css' href="https://fonts.googleapis.com/css?family=Ubuntu:400,700,400italic"/>-->
        <link rel="stylesheet" type="text/css" href="doxygen.css" title="default" media="screen,print" />
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="dynsections.js"></script>
    </head>
    <body>
        <div id="banner-container">
            <div id="banner">
                <span id="sfml">TanksDemo</span>
            </div>
        </div>
        <div id="content">
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">example_unit_create.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Демонстрирует примеры создания игровых сущностей и их удаление</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a name="a0"></a><a class="code" href="example__unit__create_8cpp.html#aee783f54c450f15b3e2892b50cf1026b">test_factory_create</a>() {</div>
<div class="line">  <span class="keyword">using namespace </span>std;</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;start game entity creating :&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// загрузка путей к файлам настроек</span></div>
<div class="line">    <a name="_a1"></a><a class="code" href="class_shared_context.html">SharedContext</a>(R<span class="stringliteral">&quot;(..\resources\paths.cfg)&quot;);</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">    </span><span class="comment">// загрузка файлов настроек для анимаций</span></div>
<div class="line">  <a name="a2"></a><a class="code" href="struct_sprite_sheet_info.html#abdb56a71f4249c813af89ca2b20687df">SpriteSheetInfo::LoadSpriteSheetInfo</a>(<a name="a3"></a><a class="code" href="class_shared_context.html#acc506c437ffc1df433da06add30311aa">SharedContext::getFilePath</a>(<span class="stringliteral">&quot;SpriteSheet&quot;</span>));</div>
<div class="line"></div>
<div class="line">    <span class="comment">// загрузка коллекции подтипов танков</span></div>
<div class="line">  <a name="a4"></a><a class="code" href="class_factory.html#ac0b9f4792daaced7351d4e0f21d8874b">Tank::factory::LoadCollection</a>(<a class="code" href="class_shared_context.html#acc506c437ffc1df433da06add30311aa">SharedContext::getFilePath</a>(<span class="stringliteral">&quot;Tanks&quot;</span>));</div>
<div class="line">  <a name="a5"></a><a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Tank::factory::Create</a>(<span class="charliteral">&#39;a&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Tank::factory::Create</a>(<span class="charliteral">&#39;b&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Tank::factory::Create</a>(<span class="charliteral">&#39;c&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Tank::factory::Create</a>(<span class="charliteral">&#39;d&#39;</span>, 0);</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;Tanks create&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// загрузка коллекции подтипов снарядов</span></div>
<div class="line">    <a class="code" href="class_factory.html#ac0b9f4792daaced7351d4e0f21d8874b">Bullet::factory::LoadCollection</a>(<a class="code" href="class_shared_context.html#acc506c437ffc1df433da06add30311aa">SharedContext::getFilePath</a>(<span class="stringliteral">&quot;Bullet&quot;</span>));</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bullet::factory::Create</a>(<span class="charliteral">&#39;A&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bullet::factory::Create</a>(<span class="charliteral">&#39;B&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bullet::factory::Create</a>(<span class="charliteral">&#39;C&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bullet::factory::Create</a>(<span class="charliteral">&#39;D&#39;</span>, 0);</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;Bullets create&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// загрузка коллекции подтипов препятствий</span></div>
<div class="line">    <a class="code" href="class_factory.html#ac0b9f4792daaced7351d4e0f21d8874b">Barrier::factory::LoadCollection</a>(<a class="code" href="class_shared_context.html#acc506c437ffc1df433da06add30311aa">SharedContext::getFilePath</a>(<span class="stringliteral">&quot;Barrier&quot;</span>));</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Barrier::factory::Create</a>(<span class="charliteral">&#39;-&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Barrier::factory::Create</a>(<span class="charliteral">&#39;+&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Barrier::factory::Create</a>(<span class="charliteral">&#39;*&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Barrier::factory::Create</a>(<span class="charliteral">&#39;/&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Barrier::factory::Create</a>(<span class="charliteral">&#39;=&#39;</span>, 0);</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;Barriers create&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// загрузка коллекции подтипов бонусов</span></div>
<div class="line">    <a class="code" href="class_factory.html#ac0b9f4792daaced7351d4e0f21d8874b">Bonus::factory::LoadCollection</a>(<a class="code" href="class_shared_context.html#acc506c437ffc1df433da06add30311aa">SharedContext::getFilePath</a>(<span class="stringliteral">&quot;Bonus&quot;</span>));</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bonus::factory::Create</a>(<span class="charliteral">&#39;c&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bonus::factory::Create</a>(<span class="charliteral">&#39;b&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bonus::factory::Create</a>(<span class="charliteral">&#39;s&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bonus::factory::Create</a>(<span class="charliteral">&#39;t&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bonus::factory::Create</a>(<span class="charliteral">&#39;h&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bonus::factory::Create</a>(<span class="charliteral">&#39;w&#39;</span>, 0);</div>
<div class="line">  <a class="code" href="class_factory.html#a97c650ec8426b6694e711ab6b8b19891">Bonus::factory::Create</a>(<span class="charliteral">&#39;f&#39;</span>, 0);</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Bonus create&quot;</span> &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Пример стандартной проблемы глобальных переменных. (неуправляемый порядок инициализации и удаления)</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// т.к. элементы GameEntity::g_entity_list ссылаются на элементы статических контейнеров </span></div>
<div class="line">    <span class="comment">// Factory&lt;T1, T2&gt;::s_current_list, если удаление Factory&lt;T1, T2&gt;::s_current_list произойдет</span></div>
<div class="line">    <span class="comment">// раньше, чем будет вызван GameEntity::g_entity_list.clear(), произйдет обращение</span></div>
<div class="line">    <span class="comment">// к недействиетельным итераторам. что является ошибкой. </span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Поэтому в программе освобождение g_entity_list производится явно.</span></div>
<div class="line">    <a name="a6"></a><a class="code" href="class_game_entity.html#a60036eb07649e8b7b47cd2403856a836">GameEntity::g_entity_list</a>.clear();</div>
<div class="line">    </div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;after clearing&quot;</span> &lt;&lt; endl;</div>
<div class="line">  getchar();</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
        </div>
        <div id="footer-container">
            <div id="footer">
                Tanks game demonstration project by Kozub Vadim<a href="https://github.com/wostorg01/BattleCity">GitHub repository</a>
                Documentation generated by <a href="http://www.doxygen.org/" title="doxygen website">doxygen</a>.<br>
                Doxygen castomization resources <a href="https://github.com/SFML/SFML/tree/master/doc" title="SFML repository">SFML doxygen documentation</a>
                Used source code <a href="https://www.packtpub.com/game-development/sfml-game-development" title="SFML Game Development Book">SFML Game Development Book</a>
            </div>
        </div>
    </body>
</html>
